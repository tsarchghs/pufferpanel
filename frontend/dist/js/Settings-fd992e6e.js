import{l as R,k as h,r as o,p as q,o as g,h as w,q as v,t as k,s,C as l,F as P,v as $,B as E,A as j,N}from"./vendor-943aface.js";import{_ as S,e as x,a as B}from"./index-b96ce60d.js";import{D}from"./Dropdown-f05f24bf.js";import{_ as I}from"./ThemeSetting-f50c637e.js";import{_ as L}from"./Toggle-edd22afa.js";const G={class:"settings"},J={class:"panel"},K=["textContent"],Q={class:"master-url"},W={class:"email"},X=["textContent"],se={setup(Y){const C={none:[],smtp:[{key:"from",type:"text"},{key:"host",type:"text"},{key:"username",type:"text"},{key:"password",type:"password"}],mailgun:[{key:"domain",type:"text"},{key:"from",type:"text"},{key:"key",type:"text"}],mailjet:[{key:"domain",type:"text"},{key:"from",type:"text"},{key:"key",type:"text"}]},{t:a}=R(),i=h("api"),U=h("toast"),V=h("theme"),m=o(""),y=o(""),f=o(!0),r=o("PufferPanel"),u=o([]),T=[];Object.keys(C).map(n=>{T.push({label:a("settings.emailProviders."+n),value:n})});const d=o("none"),b=o([]),p=o({from:"",domain:"",key:"",host:"",username:"",password:""});function M(){m.value=window.location.origin}async function _(){u.value=await V.getThemeSettings(r.value)}function F(){b.value=C[d.value]}async function z(){await i.settings.set({"panel.settings.masterUrl":m.value,"panel.settings.companyName":y.value,"panel.settings.defaultTheme":r.value,"panel.settings.themeSettings":V.serializeThemeSettings(u.value),"panel.registrationEnabled":f.value}),U.success(a("settings.Saved"))}async function A(){const n={"panel.email.provider":d.value};b.value.map(e=>{n["panel.email."+e.key]=p[e.key]}),await i.settings.set(n),U.success(a("settings.Saved"))}q(async()=>{m.value=await i.settings.get("panel.settings.masterUrl"),y.value=await i.settings.get("panel.settings.companyName"),f.value=await i.settings.get("panel.registrationEnabled")==="true",r.value=await i.settings.get("panel.settings.defaultTheme"),d.value=await i.settings.get("panel.email.provider"),Object.keys(p.value).map(async n=>{p.value[n]=await i.settings.get("panel.email."+n)}),await _(),u.value=V.deserializeThemeSettings(u.value,await i.settings.get("panel.settings.themeSettings"))});function H(n,e){u.value[n]=e}return(n,e)=>(g(),w("div",G,[v("div",J,[v("h1",{textContent:k(s(a)("settings.PanelSettings"))},null,8,K),v("div",Q,[l(S,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),label:s(a)("settings.MasterUrl"),hint:s(a)("settings.MasterUrlHint")},null,8,["modelValue","label","hint"]),l(x,{name:"auto-fix",onClick:e[1]||(e[1]=t=>M())})]),l(S,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=t=>y.value=t),label:s(a)("settings.CompanyName")},null,8,["modelValue","label"]),l(L,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),label:s(a)("settings.RegistrationEnabled"),hint:s(a)("settings.RegistrationEnabledHint")},null,8,["modelValue","label","hint"]),l(D,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value=t),options:n.$theme.getThemes(),label:s(a)("settings.DefaultTheme"),onChange:e[5]||(e[5]=t=>_())},null,8,["modelValue","options","label"]),(g(!0),w(P,null,$(u.value,(t,c)=>(g(),j(I,{key:c,"model-value":t,"onUpdate:modelValue":O=>H(c,O)},null,8,["model-value","onUpdate:modelValue"]))),128)),l(B,{color:"primary",onClick:e[6]||(e[6]=t=>z())},{default:E(()=>[l(x,{name:"save"}),N(k(s(a)("settings.SavePanelSettings")),1)]),_:1})]),v("div",W,[v("h1",{textContent:k(s(a)("settings.EmailSettings"))},null,8,X),l(D,{modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=t=>d.value=t),options:T,label:s(a)("settings.EmailProvider"),onChange:e[8]||(e[8]=t=>F())},null,8,["modelValue","label"]),(g(!0),w(P,null,$(b.value,t=>(g(),j(S,{key:t.key,modelValue:p.value[t.key],"onUpdate:modelValue":c=>p.value[t.key]=c,type:t.type,label:s(a)("settings.email."+t.key)},null,8,["modelValue","onUpdate:modelValue","type","label"]))),128)),l(B,{color:"primary",onClick:e[9]||(e[9]=t=>A())},{default:E(()=>[l(x,{name:"save"}),N(k(s(a)("settings.SaveEmailSettings")),1)]),_:1})])]))}};export{se as default};
//# sourceMappingURL=Settings-fd992e6e.js.map
