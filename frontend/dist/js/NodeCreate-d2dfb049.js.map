{"version":3,"file":"NodeCreate-d2dfb049.js","sources":["../../src/views/NodeCreate.vue"],"sourcesContent":["<script setup>\nimport { ref, inject } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useI18n } from 'vue-i18n'\nimport Btn from '@/components/ui/Btn.vue'\nimport Icon from '@/components/ui/Icon.vue'\nimport TextField from '@/components/ui/TextField.vue'\nimport Toggle from '@/components/ui/Toggle.vue'\n\nconst api = inject('api')\nconst toast = inject('toast')\nconst { t } = useI18n()\nconst router = useRouter()\n\nconst withPrivateHost = ref(false)\nconst name = ref('')\nconst publicHost = ref('')\nconst publicPort = ref('8080')\nconst privateHost = ref('')\nconst privatePort = ref('8080')\nconst sftpPort = ref('5657')\n\nfunction canCreate() {\n  if (!name.value) return false\n  if (!publicHost.value) return false\n  if (!publicPort.value) return false\n  if (!sftpPort.value) return false\n  if (withPrivateHost.value) {\n    if (!privateHost.value) return false\n    if (!privatePort.value) return false\n  }\n  return true\n}\n\nasync function create() {\n  if (!canCreate()) return\n  const node = {\n    name: name.value,\n    publicHost: publicHost.value,\n    publicPort: publicPort.value,\n    sftpPort: sftpPort.value\n  }\n  if (withPrivateHost.value) {\n    node.privateHost = privateHost.value\n    node.privatePort = privatePort.value\n  } else {\n    node.privateHost = publicHost.value\n    node.privatePort = publicPort.value\n  }\n  const id = await api.node.create(node)\n  toast.success(t('nodes.Created'))\n  router.push({ name: 'NodeView', params: { id }, query: { created: true } })\n}\n</script>\n\n<template>\n  <div class=\"nodecreate\">\n    <h1 v-text=\"t('nodes.Create')\" />\n    <text-field v-model=\"name\" autofocus class=\"name\" :label=\"t('common.Name')\" />\n    <text-field v-model=\"publicHost\" class=\"public-host\" :label=\"t('nodes.PublicHost')\" />\n    <text-field v-model=\"publicPort\" class=\"public-port\" :label=\"t('nodes.PublicPort')\" type=\"number\" />\n    <toggle v-model=\"withPrivateHost\" class=\"private-toggle\" :label=\"t('nodes.WithPrivateAddress')\" :hint=\"t('nodes.WithPrivateAddressHint')\" />\n    <text-field v-if=\"withPrivateHost\" v-model=\"privateHost\" class=\"private-host\" :label=\"t('nodes.PrivateHost')\" />\n    <text-field v-if=\"withPrivateHost\" v-model=\"privatePort\" class=\"private-port\" :label=\"t('nodes.PrivatePort')\" type=\"number\" />\n    <text-field v-model=\"sftpPort\" class=\"sftp-port\" :label=\"t('nodes.SftpPort')\" type=\"number\" />\n    <btn :disabled=\"!canCreate()\" color=\"primary\" @click=\"create()\"><icon name=\"save\" />{{ t('nodes.Create') }}</btn>\n  </div>\n</template>\n"],"names":[],"mappings":"8RASA,KAAM,GAAM,EAAO,OACb,EAAQ,EAAO,SACf,CAAE,KAAM,IACR,EAAS,IAET,EAAkB,EAAI,IACtB,EAAO,EAAI,IACX,EAAa,EAAI,IACjB,EAAa,EAAI,QACjB,EAAc,EAAI,IAClB,EAAc,EAAI,QAClB,EAAW,EAAI,QAErB,YAAqB,CAKnB,MAJI,GAAC,EAAK,OACN,CAAC,EAAW,OACZ,CAAC,EAAW,OACZ,CAAC,EAAS,OACV,EAAgB,OACd,EAAC,EAAY,OACb,CAAC,EAAY,QAKrB,kBAAwB,CACtB,GAAI,CAAC,IAAa,OAClB,KAAM,GAAO,CACX,KAAM,EAAK,MACX,WAAY,EAAW,MACvB,WAAY,EAAW,MACvB,SAAU,EAAS,OAErB,AAAI,EAAgB,MAClB,GAAK,YAAc,EAAY,MAC/B,EAAK,YAAc,EAAY,OAE/B,GAAK,YAAc,EAAW,MAC9B,EAAK,YAAc,EAAW,OAEhC,KAAM,GAAK,KAAM,GAAI,KAAK,OAAO,GACjC,EAAM,QAAQ,EAAE,kBAChB,EAAO,KAAK,CAAE,KAAM,WAAY,OAAQ,CAAE,MAAM,MAAO,CAAE,QAAS"}