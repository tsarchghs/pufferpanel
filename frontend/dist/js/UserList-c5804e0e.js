import{k as R,l as b,r,p as S,G as y,L as j,y as D,o as i,h as o,q as a,t as c,s as l,z as L,F,v as H,C as d,x,R as C,B as E,J as P,N as z}from"./vendor-943aface.js";import{c as T,e as W}from"./index-b96ce60d.js";const q={class:"userlist"},A=["textContent"],G={class:"user"},I=["src"],J={class:"title"},M={class:"subline"},K={key:1,class:"list-item"},O={class:"createLink"},Z={setup(Q){const U=R("api"),{t:g}=b(),h=r([]);let u=0,m=!1;const f=r(!1),v=r(null),p=r(null);function V(t){t.map(e=>h.value.push(e))}function w(){if(!v.value)return!1;const t=window.innerWidth||document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight,n=v.value.$el.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=e&&n.right<=t}async function _(t=1){m=!0;const e=await U.user.list(t);V(e.users),u=e.paging.page,f.value=e.paging.page*e.paging.pageSize>=(e.paging.total||0),y(()=>{m=!1,!f.value&&w()&&_(u+1)})}function k(){!m&&w()&&_(u+1)}S(()=>{y(()=>{_(),window.addEventListener("scroll",k)})}),j(()=>{window.removeEventListener("scroll",k)});function $(t){p.value||(p.value=t)}function B(){p.value.$el.focus()}return(t,e)=>{const n=D("hotkey");return i(),o("div",q,[a("h1",{textContent:c(l(g)("users.Users"))},null,8,A),L(a("div",{class:"list",onHotkey:e[0]||(e[0]=s=>B())},[(i(!0),o(F,null,H(h.value,s=>(i(),o("div",{key:s.id,class:"list-item"},[d(l(C),{ref:$,to:{name:"UserView",params:{id:s.id}}},{default:E(()=>[a("div",G,[a("img",{src:"https://www.gravatar.com/avatar/"+l(P)(s.email)+"?d=mp",class:"avatar"},null,8,I),a("div",null,[a("span",J,c(s.username),1),a("span",M,c(s.email),1)])])]),_:2},1032,["to"])]))),128)),f.value?x("",!0):(i(),o("div",{key:0,ref:(s,N)=>{N.loaderRef=s,v.value=s},class:"list-item"},[d(T,{small:""})],512)),t.$api.auth.hasScope("users.info.edit")?(i(),o("div",K,[L(d(l(C),{to:{name:"UserCreate"}},{default:E(()=>[a("div",O,[d(W,{name:"plus"}),z(c(l(g)("users.Add")),1)])]),_:1},512),[[n,"c"]])])):x("",!0)],544),[[n,"l"]])])}}};export{Z as default};
//# sourceMappingURL=UserList-c5804e0e.js.map
