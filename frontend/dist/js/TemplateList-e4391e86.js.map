{"version":3,"file":"TemplateList-e4391e86.js","sources":["../../src/views/TemplateList.vue"],"sourcesContent":["<script setup>\nimport { ref, inject, onMounted } from 'vue'\nimport { RouterLink } from 'vue-router'\nimport { useI18n } from 'vue-i18n'\nimport Icon from '@/components/ui/Icon.vue'\nimport Loader from '@/components/ui/Loader.vue'\n\nconst { t } = useI18n()\nconst api = inject('api')\nconst templatesLoaded = ref(false)\nconst templatesByRepo = ref([])\nconst firstEntry = ref(null)\n\nonMounted(async () => {\n  loadTemplates()\n})\n\nasync function loadTemplates() {\n  templatesLoaded.value = false\n  const templates = await api.template.listAllTemplates()\n  templatesByRepo.value = templates.sort((a, b) => a.id > b.id)\n  templatesLoaded.value = true\n}\n\nfunction setFirstEntry(ref) {\n  if (!firstEntry.value) firstEntry.value = ref\n}\n\nfunction focusList() {\n  firstEntry.value.$el.focus()\n}\n</script>\n\n<template>\n  <div class=\"templatelist\">\n    <h1 v-text=\"t('templates.Templates')\" />\n    <div v-hotkey=\"'l'\" @hotkey=\"focusList()\">\n      <div v-for=\"repo in templatesByRepo\" :key=\"repo.id\" class=\"list\">\n        <h2 class=\"list-header\" v-text=\"repo.name\" />\n        <div v-for=\"template in repo.templates\" :key=\"template.name\" class=\"list-item\">\n          <router-link :ref=\"setFirstEntry\" :to=\"{ name: 'TemplateView', params: { repo: repo.id, id: template.name } }\">\n            <div class=\"template\">\n              <span class=\"title\">{{template.display}}</span>\n              <span class=\"subline\">{{template.type}}</span>\n            </div>\n          </router-link>\n        </div>\n        <div v-if=\"repo.id === 0 && $api.auth.hasScope('templates.local.edit')\" class=\"list-item\">\n          <router-link v-hotkey=\"'c'\" :to=\"{ name: 'TemplateCreate' }\">\n            <div class=\"createLink\"><icon name=\"plus\" />{{ t('templates.New') }}</div>\n          </router-link>\n        </div>\n      </div>\n      <div v-if=\"!templatesLoaded\" class=\"list-item\">\n        <loader small />\n      </div>\n    </div>\n  </div>\n</template>\n"],"names":[],"mappings":"waAOA,KAAM,CAAE,KAAM,IACR,EAAM,EAAO,OACb,EAAkB,EAAI,IACtB,EAAkB,EAAI,IACtB,EAAa,EAAI,MAEvB,EAAU,SAAY,CACpB,MAGF,kBAA+B,CAC7B,EAAgB,MAAQ,GACxB,KAAM,GAAY,KAAM,GAAI,SAAS,mBACrC,EAAgB,MAAQ,EAAU,KAAK,CAAC,EAAG,IAAM,EAAE,GAAK,EAAE,IAC1D,EAAgB,MAAQ,GAG1B,WAAuB,EAAK,CAC1B,AAAK,EAAW,OAAO,GAAW,MAAQ,GAG5C,YAAqB,CACnB,EAAW,MAAM,IAAI"}