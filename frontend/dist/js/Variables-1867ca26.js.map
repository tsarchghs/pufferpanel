{"version":3,"file":"Variables-1867ca26.js","sources":["../../src/components/ui/SettingInput.vue","../../src/components/ui/Variables.vue"],"sourcesContent":["<script setup>\nimport { useI18n } from 'vue-i18n'\nimport Dropdown from './Dropdown.vue'\nimport Toggle from './Toggle.vue'\nimport Suggestion from './Suggestion.vue'\nimport TextField from './TextField.vue'\n\nconst { t, } = useI18n()\n\nconst props = defineProps({\n  disabled: { type: Boolean, default: () => false },\n  modelValue: { type: Object, required: true }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nfunction onInput(event) {\n  emit('update:modelValue', { ...props.modelValue, value: event })\n}\n</script>\n\n<template>\n  <div class=\"setting-input-wrapper\">\n    <toggle v-if=\"modelValue.type === 'boolean'\" :model-value=\"modelValue.value\" class=\"setting-input\" :disabled=\"disabled\" :label=\"modelValue.display\" :hint=\"modelValue.desc\" @update:modelValue=\"onInput($event)\" />\n    <dropdown v-else-if=\"modelValue.type === 'option'\" :model-value=\"modelValue.value\" label-prop=\"display\" class=\"setting-input\" :disabled=\"disabled\" :options=\"modelValue.options\" :label=\"modelValue.display\" :hint=\"modelValue.desc\" @update:modelValue=\"onInput($event)\" />\n    <suggestion v-else-if=\"modelValue.options\" :model-value=\"modelValue.value\" label-prop=\"display\" class=\"setting-input\" :disabled=\"disabled\" :options=\"modelValue.options\" :label=\"modelValue.display\" :hint=\"modelValue.desc\" @update:modelValue=\"onInput($event)\" />\n    <text-field v-else :model-value=\"modelValue.value\" class=\"setting-input\" :disabled=\"disabled\" :label=\"modelValue.display\" :required=\"modelValue.required\" :type=\"modelValue.type === 'integer' ? 'number' : 'text'\" :hint=\"modelValue.desc\" :after-icon=\"modelValue.userEdit ? undefined : 'admin'\" :after-hint=\"modelValue.userEdit ? undefined : t('servers.AdminOnlySetting')\" @update:modelValue=\"onInput($event)\" />\n  </div>\n</template>\n","<script setup>\nimport { computed, inject } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport SettingInput from '@/components/ui/SettingInput.vue'\n\nconst props = defineProps({\n  modelValue: { type: Object, required: true },\n  disabled: { type: Boolean, default: () => false }\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst { t } = useI18n()\nconst conditions = inject('conditions')\n\n// ensure groups are sorted correctly\nif (Array.isArray(props.modelValue.groups)) {\n  const isSorted = !!props.modelValue.groups.reduce((acc, curr) => {\n    if (acc === false || acc.order > curr.order) return false\n    return curr\n  })\n  if (!isSorted) {\n    const v = { ...props.modelValue, groups: [ ...props.modelValue.groups ] }\n    v.groups.sort((a, b) => a.order > b.order ? 1 : -1)\n    emit('update:modelValue', v)\n  }\n}\n\nconst grouplessVars = computed(() => {\n  if (Array.isArray(props.modelValue.groups)) {\n    return Object.keys(props.modelValue.data).filter(varname => {\n      return props.modelValue.groups.map(g => g.variables).flat().indexOf(varname) === -1\n    })\n  } else {\n    return Object.keys(props.modelValue.data)\n  }\n})\n\nfunction updateValue(name, event) {\n  const v = { ...props.modelValue }\n  v.data[name].value = event.value\n  emit('update:modelValue', v)\n}\n\nfunction visibleGroups() {\n  const data = {}\n  Object.keys(props.modelValue.data).map(name => {\n    data[name] = props.modelValue.data[name].value\n  })\n  return props.modelValue.groups.filter(group => {\n    if (group.if) {\n      return conditions(group.if, data)\n    }\n    return true\n  })\n}\n\nfunction filtered(group) {\n  return group.variables.filter(v => {\n    return props.modelValue.data[v] && !props.modelValue.data[v].internal\n  })\n}\n\nfunction grouplessVarsFiltered() {\n  return grouplessVars.value.filter(v => {\n    return props.modelValue.data[v] && !props.modelValue.data[v].internal\n  })\n}\n</script>\n\n<template>\n  <div v-if=\"modelValue.groups && modelValue.groups.length > 0\">\n    <div v-for=\"group in visibleGroups()\" :key=\"group.order\">\n      <div class=\"group-header\">\n        <div class=\"title\">\n          <h3 v-text=\"group.display\" />\n          <div class=\"hint\" v-text=\"group.description\" />\n        </div>\n      </div>\n      <div v-for=\"name in filtered(group)\" :key=\"name\">\n        <setting-input :model-value=\"modelValue.data[name]\" :disabled=\"disabled\" @update:modelValue=\"updateValue(name, $event)\" />\n      </div>\n    </div>\n    <div v-if=\"grouplessVarsFiltered().length > 0\">\n      <div class=\"group-header\">\n        <h3 class=\"title\" v-text=\"t('templates.NoGroup')\" />\n      </div>\n      <div v-for=\"name in grouplessVarsFiltered()\" :key=\"name\">\n        <setting-input :model-value=\"modelValue.data[name]\" :disabled=\"disabled\" @update:modelValue=\"updateValue(name, $event)\" />\n      </div>\n    </div>\n  </div>\n  <div v-else>\n    <div v-for=\"(_, name) in modelValue.data\" :key=\"name\">\n      <setting-input :model-value=\"modelValue.data[name]\" :disabled=\"disabled\" @update:modelValue=\"updateValue(name, $event)\" />\n    </div>\n  </div>\n</template>"],"names":[],"mappings":"q4BAOM,CAAE,KAAO,IASf,WAAiB,EAAO,CACtB,EAAK,oBAAqB,OAAK,EAAM,YAAX,CAAuB,MAAO,ssDCLpD,CAAE,KAAM,IACR,EAAa,EAAO,cAG1B,GAAI,MAAM,QAAQ,EAAM,WAAW,SAK7B,CAJa,CAAC,CAAC,EAAM,WAAW,OAAO,OAAO,CAAC,EAAK,IAClD,IAAQ,IAAS,EAAI,MAAQ,EAAK,MAAc,GAC7C,GAEM,CACb,KAAM,GAAI,OAAK,EAAM,YAAX,CAAuB,OAAQ,CAAE,GAAG,EAAM,WAAW,UAC/D,EAAE,OAAO,KAAK,CAAC,EAAG,IAAM,EAAE,MAAQ,EAAE,MAAQ,EAAI,IAChD,EAAK,oBAAqB,GAI9B,KAAM,GAAgB,EAAS,IACzB,MAAM,QAAQ,EAAM,WAAW,QAC1B,OAAO,KAAK,EAAM,WAAW,MAAM,OAAO,GACxC,EAAM,WAAW,OAAO,IAAI,GAAK,EAAE,WAAW,OAAO,QAAQ,KAAa,IAG5E,OAAO,KAAK,EAAM,WAAW,OAIxC,WAAqB,EAAM,EAAO,CAChC,KAAM,GAAI,KAAK,EAAM,YACrB,EAAE,KAAK,GAAM,MAAQ,EAAM,MAC3B,EAAK,oBAAqB,GAG5B,YAAyB,CACvB,KAAM,GAAO,GACb,cAAO,KAAK,EAAM,WAAW,MAAM,IAAI,GAAQ,CAC7C,EAAK,GAAQ,EAAM,WAAW,KAAK,GAAM,QAEpC,EAAM,WAAW,OAAO,OAAO,GAChC,EAAM,GACD,EAAW,EAAM,GAAI,GAEvB,IAIX,WAAkB,EAAO,CACvB,MAAO,GAAM,UAAU,OAAO,GACrB,EAAM,WAAW,KAAK,IAAM,CAAC,EAAM,WAAW,KAAK,GAAG,UAIjE,YAAiC,CAC/B,MAAO,GAAc,MAAM,OAAO,GACzB,EAAM,WAAW,KAAK,IAAM,CAAC,EAAM,WAAW,KAAK,GAAG"}