import{r as u,p,L as f,K as y,G as h,y as V,z as g,o as v,h as w}from"./vendor-943aface.js";const x=["id"],k={props:{id:{type:String,default:()=>"editor"},file:{type:String,default:()=>{}},mode:{type:String,default:()=>{}},readOnly:{type:Boolean,default:()=>!1},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(d,{expose:c,emit:r}){const t=d,n=u(null);let e=null;p(()=>{if(window.ace)i();else{const s=document.createElement("script");s.src="/js/ace/ace.js",s.type="text/javascript",s.onload=()=>{const o=document.createElement("script");o.src="/js/ace/ext-modelist.js",o.type="text/javascript",o.onload=()=>{i()},document.head.append(o)},document.head.append(s)}}),f(()=>{e&&e.destroy()}),y(()=>{e&&e.session.getValue()!==t.modelValue&&e.session.setValue(t.modelValue),e&&e.setReadOnly(t.readOnly)});function i(){h(()=>{e=window.ace.edit(t.id);let s=getComputedStyle(n.value).getPropertyValue("--ace-theme").trim()||"monokai";if(e.setTheme(`ace/theme/${s}`),t.mode)e.session.setMode(`ace/mode/${t.mode}`);else if(t.file){const a=window.ace.require("ace/ext/modelist").getModeForPath(t.file).mode;e.session.setMode(a)}e.session.setValue(t.modelValue),e.setReadOnly(t.readOnly),e.on("change",()=>{r("update:modelValue",e.session.getValue())}),e.focus(),e.commands.addCommand({name:"unfocusEditor",bindKey:{win:"Escape",mac:"Escape"},exec:o=>{o.blur()}})})}return c({refresh:()=>{e.resize()}}),(s,o)=>{const a=V("hotkey");return g((v(),w("div",{id:d.id,ref:(l,m)=>{m.el=l,n.value=l},class:"ace"},null,8,x)),[[a]])}}};export{k as _};
//# sourceMappingURL=Ace-74f6f60f.js.map
