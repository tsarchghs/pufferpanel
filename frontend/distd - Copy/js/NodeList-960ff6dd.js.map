{"version":3,"file":"NodeList-960ff6dd.js","sources":["../../src/views/NodeList.vue"],"sourcesContent":["<script setup>\nimport { ref, inject, onMounted } from 'vue'\nimport { RouterLink } from 'vue-router'\nimport { useI18n } from 'vue-i18n'\nimport Icon from '@/components/ui/Icon.vue'\nimport Loader from '@/components/ui/Loader.vue'\n\nconst { t } = useI18n()\nconst api = inject('api')\nconst nodesLoaded = ref(false)\nconst nodes = ref([])\nconst firstEntry = ref(null)\n\nonMounted(async () => {\n  nodes.value = await api.node.list()\n  nodesLoaded.value = true\n})\n\nfunction setFirstEntry(ref) {\n  if (!firstEntry.value) firstEntry.value = ref\n}\n\nfunction focusList() {\n  firstEntry.value.$el.focus()\n}\n</script>\n\n<template>\n  <div class=\"nodelist\">\n    <h1 v-text=\"t('nodes.Nodes')\" />\n    <div v-hotkey=\"'l'\" class=\"list\" @hotkey=\"focusList()\">\n      <div v-for=\"node in nodes\" :key=\"node.name\" class=\"list-item\">\n        <router-link :ref=\"setFirstEntry\" :to=\"{ name: 'NodeView', params: { id: node.id } }\">\n          <div class=\"node\">\n            <span class=\"title\">{{node.name}}</span>\n            <span class=\"subline\">{{node.publicHost + ':' + node.publicPort}}</span>\n          </div>\n        </router-link>\n      </div>\n      <div v-if=\"!nodesLoaded\" class=\"list-item\">\n        <loader small />\n      </div>\n      <div v-if=\"$api.auth.hasScope('nodes.create')\" class=\"list-item\">\n        <router-link v-hotkey=\"'c'\" :to=\"{ name: 'NodeCreate' }\">\n          <div class=\"createLink\"><icon name=\"plus\" />{{ t('nodes.Add') }}</div>\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n"],"names":[],"mappings":"yYAOA,KAAM,CAAE,KAAM,IACR,EAAM,EAAO,OACb,EAAc,EAAI,IAClB,EAAQ,EAAI,IACZ,EAAa,EAAI,MAEvB,EAAU,SAAY,CACpB,EAAM,MAAQ,KAAM,GAAI,KAAK,OAC7B,EAAY,MAAQ,KAGtB,WAAuB,EAAK,CAC1B,AAAK,EAAW,OAAO,GAAW,MAAQ,GAG5C,YAAqB,CACnB,EAAW,MAAM,IAAI"}