import{l as k,k as w,r as g,S as x,p as V,o,h as d,q as v,t as u,s as l,C as p,F as C,v as $,A as D,B as F,N as B}from"./vendor-943aface.js";import{e as N,a as O}from"./index-b96ce60d.js";import{_ as U}from"./Toggle-edd22afa.js";import{_ as q}from"./Variables-1867ca26.js";import"./Dropdown-f05f24bf.js";import"./Suggestion-7a5f46c0.js";const H=["textContent"],I={class:"group-header"},T={class:"title"},A=["textContent"],E=["textContent"],P={props:{server:{type:Object,required:!0}},setup(c){const e=c,{t,te:m,locale:h}=k(),_=w("toast"),s=g({}),n=g({}),S=x(()=>Object.keys(s.value).length>0||Object.keys(n.value).length>0);V(async()=>{e.server.hasScope("server.definition.view")?s.value=await e.server.getDefinition():e.server.hasScope("server.data.view")&&(s.value=await e.server.getData()||{}),e.server.hasScope("server.flags.view")&&(n.value=await e.server.getFlags()||{})});async function b(){const a={};Object.keys(s.value.data).map(r=>{a[r]=s.value.data[r].value}),e.server.hasScope("server.data.edit.admin")?await e.server.adminUpdateData(a):e.server.hasScope("server.data.edit")&&await e.server.updateData(a),e.server.hasScope("server.flags.edit")&&await e.server.setFlags(n.value),_.success(t("servers.SettingsSaved"))}function y(a){if(m(`servers.flags.hint.${a}`,h))return t(`servers.flags.hint.${a}`)}return(a,r)=>(o(),d("div",null,[v("h2",{textContent:u(l(t)("servers.Settings"))},null,8,H),p(q,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=f=>s.value=f),disabled:!c.server.hasScope("server.data.edit")},null,8,["modelValue","disabled"]),v("div",I,[v("div",T,[v("h3",{textContent:u(l(t)("servers.FlagsHeader"))},null,8,A)])]),(o(!0),d(C,null,$(n.value,(f,i)=>(o(),d("div",{key:i},[p(U,{modelValue:n.value[i],"onUpdate:modelValue":j=>n.value[i]=j,disabled:!c.server.hasScope("server.flags.edit"),label:l(t)(`servers.flags.${i}`),hint:y()},null,8,["modelValue","onUpdate:modelValue","disabled","label","hint"])]))),128)),l(S)?(o(),D(O,{key:1,color:"primary",onClick:r[1]||(r[1]=f=>b())},{default:F(()=>[p(N,{name:"save"}),B(u(l(t)("servers.SaveSettings")),1)]),_:1})):(o(),d("span",{key:0,textContent:u(l(t)("servers.NoSettings"))},null,8,E))]))}};export{P as default};
//# sourceMappingURL=Settings-d0da756b.js.map
