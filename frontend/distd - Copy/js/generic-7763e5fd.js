import{e as m,a as k,_ as F,b as H,g as $,c as b}from"./index-b96ce60d.js";import{l as I,r as V,p as R,L,o as l,h as j,q as p,s,n as A,x as i,y as N,z as U,A as c,B as n,C as t,t as S,N as q,F as M,a0 as E,k as z,m as K,H as W}from"./vendor-943aface.js";import{T as G,_ as x}from"./Tab-85f76cb0.js";const J=["data-tooltip"],Q={props:{server:{type:Object,required:!0}},setup(e){const r=e,{t:u}=I(),a=V(null);let y=null,C=null;return R(async()=>{y=r.server.on("status",h=>{h.installing?a.value="installing":h.running?a.value="online":a.value="offline"}),C=r.server.startTask(async()=>{r.server.needsPolling()&&r.server.hasScope("server.status")&&(a.value=await r.server.getStatus())},5e3),r.server.hasScope("server.status")&&(a.value=await r.server.getStatus())}),L(()=>{y&&y(),C&&r.server.stopTask(C)}),(h,d)=>e.server.hasScope("server.status")?(l(),j("span",{key:0,class:A(["status",a.value])},[p("span",{class:"tooltip","data-tooltip":s(u)(a.value==="online"?"common.Online":a.value==="offline"?"common.Offline":a.value==="installing"?"common.Installing":"common.Unknown")},null,8,J)],2)):i("",!0)}},X={class:"text"},Y={class:"text"},Z={class:"text"},ee={class:"text"},se={class:"text"},te={class:"text"},re={class:"text"},ae={class:"text"},le={props:{server:{type:Object,required:!0}},setup(e){const r=e,{t:u}=I(),a=V(!1);function y(){!a.value||(a.value=!1)}function C(){const v=a.value;setTimeout(()=>a.value=!v,100)}const h={"r r":()=>r.server.start(),"r s":()=>r.server.stop(),"r k":()=>r.server.kill(),"r i":()=>r.server.install()};function d(v){h[v]&&h[v]()}const g=r.server.hasScope("server.start")||r.server.hasScope("server.stop")||r.server.hasScope("server.kill")||r.server.hasScope("server.install");return(v,o)=>{const _=N("click-outside"),O=N("hotkey");return U((l(),j("span",{class:"server-controls",onHotkey:d},[e.server.hasScope("server.start")?(l(),c(k,{key:0,class:"start",onClick:o[0]||(o[0]=f=>e.server.start())},{default:n(()=>[t(m,{name:"play"}),p("span",X,S(s(u)("servers.Start")),1)]),_:1})):i("",!0),e.server.hasScope("server.stop")?(l(),c(k,{key:1,class:"stop",onClick:o[1]||(o[1]=f=>e.server.stop())},{default:n(()=>[t(m,{name:"stop"}),p("span",Y,S(s(u)("servers.Stop")),1)]),_:1})):i("",!0),e.server.hasScope("server.kill")?(l(),c(k,{key:2,class:"kill",onClick:o[2]||(o[2]=f=>e.server.kill())},{default:n(()=>[t(m,{name:"kill"}),p("span",Z,S(s(u)("servers.Kill")),1)]),_:1})):i("",!0),e.server.hasScope("server.install")?(l(),c(k,{key:3,class:"install",onClick:o[3]||(o[3]=f=>e.server.install())},{default:n(()=>[t(m,{name:"install"}),p("span",ee,S(s(u)("servers.Install")),1)]),_:1})):i("",!0),t(k,{class:"menu",onClick:o[4]||(o[4]=f=>C())},{default:n(()=>[t(m,{name:"menu"})]),_:1}),s(g)?U((l(),j("div",{key:4,class:A(["menu",a.value?"open":"closed"])},[e.server.hasScope("server.start")?(l(),c(k,{key:0,class:"start",onClick:o[5]||(o[5]=f=>{a.value=!1,e.server.start()})},{default:n(()=>[t(m,{name:"play"}),p("span",se,S(s(u)("servers.Start")),1)]),_:1})):i("",!0),e.server.hasScope("server.stop")?(l(),c(k,{key:1,class:"stop",onClick:o[6]||(o[6]=f=>{a.value=!1,e.server.stop()})},{default:n(()=>[t(m,{name:"stop"}),p("span",te,S(s(u)("servers.Stop")),1)]),_:1})):i("",!0),e.server.hasScope("server.kill")?(l(),c(k,{key:2,class:"kill",onClick:o[7]||(o[7]=f=>{a.value=!1,e.server.kill()})},{default:n(()=>[t(m,{name:"kill"}),p("span",re,S(s(u)("servers.Kill")),1)]),_:1})):i("",!0),e.server.hasScope("server.install")?(l(),c(k,{key:3,class:"install",onClick:o[8]||(o[8]=f=>{a.value=!1,e.server.install()})},{default:n(()=>[t(m,{name:"install"}),p("span",ae,S(s(u)("servers.Install")),1)]),_:1})):i("",!0)],2)),[[_,y]]):i("",!0)],544)),[[O,Object.keys(h)]])}}},ne={class:"server-header"},oe={class:"name"},ie={props:{server:{type:Object,required:!0}},setup(e){const r=e,{t:u}=I(),a=V(!1),y=V(r.server.name);async function C(){await r.server.updateName(y.value),a.value=!1}return(h,d)=>(l(),j(M,null,[p("h1",ne,[t(Q,{server:e.server},null,8,["server"]),p("span",oe,[q(S(e.server.name)+" ",1),e.server.hasScope("server.name.edit")?(l(),c(k,{key:0,variant:"icon",tooltip:s(u)("servers.EditName"),onClick:d[0]||(d[0]=g=>a.value=!a.value)},{default:n(()=>[t(m,{name:"edit"})]),_:1},8,["tooltip"])):i("",!0)]),t(le,{server:e.server},null,8,["server"])]),t(H,{modelValue:a.value,"onUpdate:modelValue":d[3]||(d[3]=g=>a.value=g),title:s(u)("servers.EditName"),closable:"",class:"server-name"},{default:n(()=>[t(F,{modelValue:y.value,"onUpdate:modelValue":d[1]||(d[1]=g=>y.value=g)},null,8,["modelValue"]),t(k,{color:"primary",onClick:d[2]||(d[2]=g=>C())},{default:n(()=>[t(m,{name:"save"}),q(S(s(u)("common.Save")),1)]),_:1})]),_:1},8,["modelValue","title"])],64))}},ve={key:0,class:"alert info"},ue=["textContent"],ke={props:{server:{type:Object,required:!0}},setup(e){const r=e,u=E({loader:()=>$(()=>import("./Console-c96e15e6.js"),["js/Console-c96e15e6.js","js/vendor-943aface.js","js/index-b96ce60d.js"]),loadingComponent:b}),a=E({loader:()=>$(()=>import("./Stats-9514b56e.js"),["js/Stats-9514b56e.js","js/vendor-943aface.js"]),loadingComponent:b}),y=E({loader:()=>$(()=>import("./Files-3b0dd67f.js"),["js/Files-3b0dd67f.js","js/vendor-943aface.js","js/index-b96ce60d.js","js/Ace-74f6f60f.js"]),loadingComponent:b}),C=E({loader:()=>$(()=>import("./Settings-d0da756b.js"),["js/Settings-d0da756b.js","js/vendor-943aface.js","js/index-b96ce60d.js","js/Toggle-edd22afa.js","js/Variables-1867ca26.js","js/Dropdown-f05f24bf.js","js/Suggestion-7a5f46c0.js"]),loadingComponent:b}),h=E({loader:()=>$(()=>import("./Users-62cff513.js"),["js/Users-62cff513.js","js/vendor-943aface.js","js/index-b96ce60d.js","js/Toggle-edd22afa.js"]),loadingComponent:b});E({loader:()=>$(()=>import("./Tasks-fa854711.js"),["js/Tasks-fa854711.js","js/vendor-943aface.js"]),loadingComponent:b});const d=E({loader:()=>$(()=>import("./Sftp-40ef5ae2.js"),["js/Sftp-40ef5ae2.js","js/vendor-943aface.js","js/index-b96ce60d.js"]),loadingComponent:b}),g=E({loader:()=>$(()=>import("./Admin-436bb24b.js"),["js/Admin-436bb24b.js","js/vendor-943aface.js","js/Ace-74f6f60f.js","js/index-b96ce60d.js","js/Tab-85f76cb0.js","js/RunConfig-a666fd53.js","js/Dropdown-f05f24bf.js","js/EnvironmentConfig-793daa60.js","js/Suggestion-7a5f46c0.js","js/Toggle-edd22afa.js"]),loadingComponent:b}),{t:v}=I(),o=z("events"),_=K(),O=W(),f=V(!1),w=V(!1);let T=2,P=null;return R(()=>{_.query.created&&r.server.hasScope("server.install")&&(o.emit("confirm",{title:v("servers.InstallPrompt"),body:v("servers.InstallPromptBody")},{text:v("servers.Install"),icon:"install",action:()=>{r.server.install()}},{color:"neutral"}),O.push({query:{},hash:_.hash})),P=r.server.startTask(()=>{r.server.needsPolling()&&T<3&&(T+=1),!r.server.needsPolling()&&T>0&&(T-=1),T===3&&(f.value=!0),T===0&&(f.value=!1)},5e3)}),L(()=>{P&&r.server.stopTask(P)}),(B,D)=>(l(),j("div",{class:A(f.value?"http-fallback":"")},[t(ie,{key:B.nameUpdateHack,server:e.server},null,8,["server"]),t(G,{anchors:""},{default:n(()=>[e.server.hasScope("server.console")||e.server.hasScope("server.console.send")?(l(),c(x,{key:0,id:"console",title:s(v)("servers.Console"),icon:"console",hotkey:"t c"},{default:n(()=>[f.value&&!w.value?(l(),j("div",ve,[p("span",{textContent:S(s(v)("servers.SocketWarnConsole"))},null,8,ue),t(k,{variant:"icon",onClick:D[0]||(D[0]=ce=>w.value=!0)},{default:n(()=>[t(m,{name:"close"})]),_:1})])):i("",!0),t(s(u),{server:e.server},null,8,["server"])]),_:1},8,["title"])):i("",!0),e.server.hasScope("server.stats")?(l(),c(x,{key:1,id:"stats",title:s(v)("servers.Statistics"),icon:"stats",hotkey:"t i"},{default:n(()=>[t(s(a),{server:e.server},null,8,["server"])]),_:1},8,["title"])):i("",!0),e.server.hasScope("server.files.view")?(l(),c(x,{key:2,id:"files",title:s(v)("servers.Files"),icon:"files",hotkey:"t f"},{default:n(()=>[t(s(y),{server:e.server},null,8,["server"])]),_:1},8,["title"])):i("",!0),e.server.hasScope("server.data.view")||e.server.hasScope("server.flags.view")?(l(),c(x,{key:3,id:"settings",title:s(v)("servers.Settings"),icon:"settings",hotkey:"t s"},{default:n(()=>[t(s(C),{server:e.server},null,8,["server"])]),_:1},8,["title"])):i("",!0),e.server.hasScope("server.users.view")?(l(),c(x,{key:4,id:"users",title:s(v)("users.Users"),icon:"users",hotkey:"t u"},{default:n(()=>[t(s(h),{server:e.server},null,8,["server"])]),_:1},8,["title"])):i("",!0),i("",!0),e.server.hasScope("server.sftp")?(l(),c(x,{key:6,id:"sftp",title:s(v)("servers.SFTPInfo"),icon:"sftp",hotkey:"t 6"},{default:n(()=>[t(s(d),{server:e.server},null,8,["server"])]),_:1},8,["title"])):i("",!0),e.server.hasScope("server.definition.view")||e.server.hasScope("server.delete")?(l(),c(x,{key:7,id:"admin",title:s(v)("servers.Admin"),icon:"admin",hotkey:"t a"},{default:n(()=>[t(s(g),{server:e.server},null,8,["server"])]),_:1},8,["title"])):i("",!0)]),_:1})],2))}};export{ke as default};
//# sourceMappingURL=generic-7763e5fd.js.map
