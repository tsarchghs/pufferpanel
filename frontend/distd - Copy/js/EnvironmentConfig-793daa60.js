var q=Object.defineProperty,w=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var H=(t,d,n)=>d in t?q(t,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[d]=n,x=(t,d)=>{for(var n in d||(d={}))T.call(d,n)&&H(t,n,d[n]);if(A)for(var n of A(d))R.call(d,n)&&H(t,n,d[n]);return t},B=(t,d)=>w(t,K(d));import{l as I,r as j,p as N,o as a,h as c,t as y,x as g,F as E,v as F,q as M,C as h,B as C,N as O,s as k,A as $}from"./vendor-943aface.js";import{_ as f,e as U,a as P}from"./index-b96ce60d.js";import{_ as D}from"./Suggestion-7a5f46c0.js";const _={class:"key-value-input"},z=["textContent"],G=["textContent"],J=["textContent"],Q={class:"fields"},W={props:{label:{type:String,default:()=>{}},addLabel:{type:String,default:()=>{}},keyLabel:{type:String,default:()=>""},valueLabel:{type:String,default:()=>""},hint:{type:String,default:()=>{}},error:{type:String,default:()=>{}},modelValue:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(t,{emit:d}){const n=t,{t:r}=I(),i=j([]),b=j({});N(()=>{for(let l in n.modelValue)i.value.push({key:l,value:n.modelValue[l]})});function v(){const l={};i.value.map(u=>{!u.key||(!l[u.key]&&l[u.key]!==""?(l[u.key]=u.value,b.value[u.key]=void 0):b.value[u.key]=r("errors.DuplicateKey"))}),d("update:modelValue",l)}function p(){i.value.push({key:"",value:""})}function e(l,u){l.key=u,v()}function s(l,u){l.value=u,v()}function o(l){i.value=i.value.filter(u=>u!==l),b.value={},v()}return(l,u)=>(a(),c("div",_,[t.label?(a(),c("div",{key:0,class:"label",textContent:y(t.label)},null,8,z)):g("",!0),t.error?(a(),c("div",{key:1,class:"error",textContent:y(t.error)},null,8,G)):t.hint?(a(),c("div",{key:2,class:"hint",textContent:y(t.hint)},null,8,J)):g("",!0),(a(!0),c(E,null,F(i.value,(m,S)=>(a(),c("div",{key:S,class:"entry"},[M("div",Q,[h(f,{"model-value":m.key,error:b.value[m.key],label:t.keyLabel,"onUpdate:modelValue":V=>e(m,V)},null,8,["model-value","error","label","onUpdate:modelValue"]),h(f,{"model-value":m.value,label:t.valueLabel,"onUpdate:modelValue":V=>s(m,V)},null,8,["model-value","label","onUpdate:modelValue"])]),h(P,{variant:"icon",onClick:V=>o(m)},{default:C(()=>[h(U,{name:"remove"})]),_:2},1032,["onClick"])]))),128)),h(P,{variant:"text",onClick:u[0]||(u[0]=m=>p())},{default:C(()=>[h(U,{name:"plus"}),O(y(t.addLabel||k(r)("common.Add")),1)]),_:1})]))}},X={class:"port-mapping-input"},Y=["textContent"],Z=["textContent"],ee=["textContent"],te={class:"fields"},le={props:{label:{type:String,default:()=>{}},addLabel:{type:String,default:()=>{}},hint:{type:String,default:()=>{}},error:{type:String,default:()=>{}},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(t,{emit:d}){const n=t,{t:r}=I(),i=j([]);N(()=>{for(let s in n.modelValue){const o=n.modelValue[s],[l,u]=o.split("/"),[m,S,V]=l.split(":");i.value.push({host:m,outsidePort:S,insidePort:V,protocol:u})}});function b(){const s=[];i.value.filter(o=>o.host&&o.outsidePort&&o.insidePort&&o.protocol).map(o=>s.push(`${o.host}:${o.outsidePort}:${o.insidePort}/${o.protocol}`)),d("update:modelValue",s)}function v(){i.value.push({host:"0.0.0.0",outsidePort:"",insidePort:"",protocol:"tcp"}),b()}function p(s,o,l){s[o]=l,b()}function e(s){i.value=i.value.filter(o=>o!==s),b()}return(s,o)=>(a(),c("div",X,[t.label?(a(),c("div",{key:0,class:"label",textContent:y(t.label)},null,8,Y)):g("",!0),t.error?(a(),c("div",{key:1,class:"error",textContent:y(t.error)},null,8,Z)):t.hint?(a(),c("div",{key:2,class:"hint",textContent:y(t.hint)},null,8,ee)):g("",!0),(a(!0),c(E,null,F(i.value,(l,u)=>(a(),c("div",{key:u,class:"entry"},[M("div",te,[h(f,{"model-value":l.host,label:k(r)("common.Host"),"onUpdate:modelValue":m=>p(l,"host",m)},null,8,["model-value","label","onUpdate:modelValue"]),h(f,{"model-value":l.outsidePort,label:k(r)("env.docker.OutsidePort"),"onUpdate:modelValue":m=>p(l,"outsidePort",m)},null,8,["model-value","label","onUpdate:modelValue"]),h(f,{"model-value":l.insidePort,label:k(r)("env.docker.InsidePort"),"onUpdate:modelValue":m=>p(l,"insidePort",m)},null,8,["model-value","label","onUpdate:modelValue"]),h(D,{"model-value":l.protocol,label:k(r)("common.Protocol"),options:["tcp","udp"],"onUpdate:modelValue":m=>p(l,"protocol",m)},null,8,["model-value","label","onUpdate:modelValue"])]),h(P,{variant:"icon",onClick:m=>e(l)},{default:C(()=>[h(U,{name:"remove"})]),_:2},1032,["onClick"])]))),128)),h(P,{variant:"text",onClick:o[0]||(o[0]=l=>v())},{default:C(()=>[h(U,{name:"plus"}),O(y(t.addLabel||k(r)("common.Add")),1)]),_:1})]))}},ne={class:"environment-config"},ae=["textContent"],oe=["textContent"],L={host:[],docker:[{name:"image",type:"text",label:"templates.DockerImage",default:"pufferpanel/generic"},{name:"containerRoot",type:"text",default:""},{name:"networkName",type:"text",options:["host","bridge"],default:"host"},{name:"bindings",type:"map",hint:"env.docker.BindingsHint",keyLabel:"env.docker.HostPath",valueLabel:"env.docker.ContainerPath",default:{}},{name:"portBindings",type:"portBindings",label:"env.docker.portBindings",hint:"env.docker.PortBindingsHint",default:[]}],unsupported:[]},me={props:{noFieldsMessage:{type:String,default:()=>{}},modelValue:{type:Object,validator:t=>L[t.type]!==void 0,required:!0}},emits:["update:modelValue"],setup(t,{emit:d}){const n=t,{t:r}=I();N(()=>{const v={};let p=n.modelValue.type;(p==="standard"||p==="tty")&&(p="host"),L[p].map(e=>{n.modelValue[e.name]||(v[e.name]=e.default)}),Object.keys(v).length>0&&d("update:modelValue",x(B(x({},n.modelValue),{type:p}),v))});function i(v,p){d("update:modelValue",B(x({},n.modelValue),{[v]:p}))}function b(v){return v.label?r(v.label):r(`env.${n.modelValue.type}.${v.name}`)}return(v,p)=>(a(),c("div",ne,[t.noFieldsMessage&&L[t.modelValue.type].length===0?(a(),c("div",{key:0,textContent:y(t.noFieldsMessage)},null,8,ae)):g("",!0),(a(!0),c(E,null,F(L[t.modelValue.type],e=>(a(),c("div",{key:e.name,class:"field"},[e.type==="map"?(a(),$(W,{key:0,"model-value":t.modelValue[e.name]||e.default,label:b(e),hint:e.hint?k(r)(e.hint):void 0,"key-label":k(r)(e.keyLabel),"value-label":k(r)(e.valueLabel),"onUpdate:modelValue":s=>i(e.name,s)},null,8,["model-value","label","hint","key-label","value-label","onUpdate:modelValue"])):e.type==="portBindings"?(a(),$(le,{key:1,"model-value":t.modelValue[e.name]||e.default,label:b(e),hint:e.hint?k(r)(e.hint):void 0,"onUpdate:modelValue":s=>i(e.name,s)},null,8,["model-value","label","hint","onUpdate:modelValue"])):e.type==="text"&&e.options?(a(),$(D,{key:2,"model-value":t.modelValue[e.name]||e.default,label:b(e),options:e.options,hint:e.hint?k(r)(e.hint):void 0,"onUpdate:modelValue":s=>i(e.name,s)},null,8,["model-value","label","options","hint","onUpdate:modelValue"])):e.type==="text"?(a(),$(f,{key:3,"model-value":t.modelValue[e.name]||e.default,label:b(e),hint:e.hint?k(r)(e.hint):void 0,"onUpdate:modelValue":s=>i(e.name,s)},null,8,["model-value","label","hint","onUpdate:modelValue"])):(a(),c("span",{key:4,textContent:y(`${e.type} not yet implemented`)},null,8,oe))]))),128))]))}};export{me as _,W as a};
//# sourceMappingURL=EnvironmentConfig-793daa60.js.map
