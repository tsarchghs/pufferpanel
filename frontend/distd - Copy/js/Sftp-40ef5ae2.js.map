{"version":3,"file":"Sftp-40ef5ae2.js","sources":["../../src/components/server/Sftp.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted, inject } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport Btn from '@/components/ui/Btn.vue'\nimport Icon from '@/components/ui/Icon.vue'\n\nconst { t } = useI18n()\nconst api = inject('api')\n\nconst props = defineProps({\n  server: { type: Object, required: true }\n})\n\nconst host = ref('')\nconst user = ref('')\nconst hostField = ref(null)\nconst userField = ref(null)\nconst hostCopied = ref(false)\nconst userCopied = ref(false)\nconst userEncoded = ref('')\n\nonMounted(async () => {\n  host.value = props.server.node.publicHost !== '127.0.0.1' ? props.server.node.publicHost : window.location.hostname\n  host.value = host.value + ':' + props.server.node.sftpPort\n  const u = await api.self.get()\n  user.value = `${u.email}#${props.server.id}`\n  userEncoded.value = encodeURIComponent(user.value);\n})\n\nfunction copyHost() {\n  hostField.value.select()\n  document.execCommand('copy')\n  userCopied.value = false\n  hostCopied.value = true\n  setTimeout(() => {\n    hostCopied.value = false\n  }, 6000)\n}\n\nfunction copyUser() {\n  userField.value.select()\n  document.execCommand('copy')\n  hostCopied.value = false\n  userCopied.value = true\n  setTimeout(() => {\n    userCopied.value = false\n  }, 6000)\n}\n</script>\n\n<template>\n  <div>\n    <h2 v-text=\"t('servers.SFTPInfo')\" />\n    <div>\n      <b>{{t('common.Host')}}/{{t('common.Port')}}: </b>\n      <span>{{host}}</span>\n      <btn variant=\"icon\" :tooltip=\"t('common.Copy')\" @click=\"copyHost()\"><icon name=\"copy\" /></btn>\n      <span v-if=\"hostCopied\" class=\"copied\" v-text=\"t('common.Copied')\" />\n    </div>\n    <input ref=\"hostField\" :value=\"host\" style=\"width:1px;height:1px;position:fixed;left:-100vw;\" />\n    <div>\n      <b>{{t('users.Username')}}: </b>\n      <span>{{user}}</span>\n      <btn variant=\"icon\" :tooltip=\"t('common.Copy')\" @click=\"copyUser()\"><icon name=\"copy\" /></btn>\n      <span v-if=\"userCopied\" class=\"copied\" v-text=\"t('common.Copied')\" />\n    </div>\n    <input ref=\"userField\" :value=\"user\" style=\"width:1px;height:1px;position:fixed;left:-100vw;\" />\n    <div>\n      <b>{{t('users.Password')}}: </b>\n      <span>{{t('users.AccountPassword')}}</span>\n    </div>\n    <a :href=\"`sftp://${userEncoded}@${host}`\"><btn color=\"primary\" v-text=\"t('servers.SftpConnection')\" /></a>\n  </div>\n</template>\n"],"names":[],"mappings":"mUAMM,CAAE,GAAM,IACR,EAAM,EAAO,OAMb,EAAO,EAAI,IACX,EAAO,EAAI,IACX,EAAY,EAAI,MAChB,EAAY,EAAI,MAChB,EAAa,EAAI,IACjB,EAAa,EAAI,IACjB,EAAc,EAAI,IAExB,EAAU,SAAY,CACpB,EAAK,MAAQ,EAAM,OAAO,KAAK,aAAe,YAAc,EAAM,OAAO,KAAK,WAAa,OAAO,SAAS,SAC3G,EAAK,MAAQ,EAAK,MAAQ,IAAM,EAAM,OAAO,KAAK,SAClD,KAAM,GAAI,KAAM,GAAI,KAAK,MACzB,EAAK,MAAQ,GAAG,EAAE,SAAS,EAAM,OAAO,KACxC,EAAY,MAAQ,mBAAmB,EAAK,SAG9C,YAAoB,CAClB,EAAU,MAAM,SAChB,SAAS,YAAY,QACrB,EAAW,MAAQ,GACnB,EAAW,MAAQ,GACnB,WAAW,IAAM,CACf,EAAW,MAAQ,IAClB,KAGL,YAAoB,CAClB,EAAU,MAAM,SAChB,SAAS,YAAY,QACrB,EAAW,MAAQ,GACnB,EAAW,MAAQ,GACnB,WAAW,IAAM,CACf,EAAW,MAAQ,IAClB"}