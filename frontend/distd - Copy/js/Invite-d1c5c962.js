import{l as j,k as V,H as I,m as L,r as n,o as N,h as D,q as S,t as g,s as l,C as u}from"./vendor-943aface.js";import{_ as m,a as P,d as H}from"./index-b96ce60d.js";const z={class:"register"},A=["textContent"],K={setup(F){const{t:o}=j(),d=V("api"),y=V("events"),s=V("validate"),x=I(),v=L(),i=n(""),a=n(v.query.email),t=n(""),f=n(""),p=n(""),w=n(""),C=n(""),k=n("");function b(){return f.value===t.value}function E(){s.username(i.value)||(p.value=o("errors.ErrUsernameRequirements"))}function U(){s.email(a.value)||(w.value=o("errors.ErrEmailInvalid"))}function c(){s.password(t.value)||(C.value=o("errors.ErrPasswordRequirements"))}function q(){b()||(k.value=o("errors.ErrPasswordsNotIdentical"))}function $(){return s.username(i.value)&&s.email(a.value)&&s.password(t.value)&&b()}async function B(){!$()||(await d.auth.login(a.value,v.query.token),await d.self.updateDetails(i.value,a.value,v.query.token),await d.self.changePassword(v.query.token,t.value),x.push(H(d)),y.emit("login"))}return(R,e)=>(N(),D("div",z,[S("h1",{textContent:g(l(o)("users.Register"))},null,8,A),u(m,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=r=>i.value=r),autofocus:"",label:l(o)("users.Username"),icon:"account",error:p.value,onChange:e[1]||(e[1]=r=>p.value=""),onBlur:e[2]||(e[2]=r=>E())},null,8,["modelValue","label","error"]),u(m,{modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=r=>a.value=r),disabled:"",type:"email",label:l(o)("users.Email"),icon:"email",error:w.value,onChange:e[4]||(e[4]=r=>w.value=""),onBlur:e[5]||(e[5]=r=>U())},null,8,["modelValue","label","error"]),u(m,{modelValue:t.value,"onUpdate:modelValue":e[6]||(e[6]=r=>t.value=r),type:"password",label:l(o)("users.Password"),icon:"lock",error:C.value,onChange:e[7]||(e[7]=r=>C.value=""),onBlur:e[8]||(e[8]=r=>c())},null,8,["modelValue","label","error"]),u(m,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=r=>f.value=r),type:"password",label:l(o)("users.ConfirmPassword"),icon:"lock",error:k.value,onChange:e[10]||(e[10]=r=>k.value=""),onBlur:e[11]||(e[11]=r=>q())},null,8,["modelValue","label","error"]),u(P,{color:"primary",disabled:!$(),onClick:e[12]||(e[12]=r=>B()),textContent:g(l(o)("users.Register"))},null,8,["disabled","textContent"]),u(P,{variant:"text",onClick:e[13]||(e[13]=r=>R.$router.push({name:"Login"})),textContent:g(l(o)("users.LoginLink"))},null,8,["textContent"])]))}};export{K as default};
//# sourceMappingURL=Invite-d1c5c962.js.map
